#!/usr/bin/env python

Import("env")

import os

import editor_icons_builders

<<<<<<< HEAD
make_editor_icons_builder = Builder(
    action=run_in_subprocess(editor_icons_builders.make_editor_icons_action), suffix=".h", src_suffix=".svg"
)

env["BUILDERS"]["MakeEditorIconsBuilder"] = make_editor_icons_builder
=======

env["BUILDERS"]["MakeEditorIconsBuilder"] = Builder(
    action=env.Run(editor_icons_builders.make_editor_icons_action, "Generating editor icons header."),
    suffix=".h",
    src_suffix=".svg",
)
>>>>>>> 5d9cab3aeb3c62df6b7b44e6e68c0ebbb67f7a45

# Editor's own icons
icon_sources = Glob("*.svg")

# Module icons
for path in env.module_icons_paths:
    if not os.path.isabs(path):
        icon_sources += Glob("#" + path + "/*.svg")  # Built-in.
    else:
        icon_sources += Glob(path + "/*.svg")  # Custom.

env.Alias("editor_icons", [env.MakeEditorIconsBuilder("#editor/editor_icons.gen.h", icon_sources)])
